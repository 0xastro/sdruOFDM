<pre class="code">
<span class="srcline"><span class="lineno"><a href="46,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T121U3">varargout</span> = mapiPrivate(<span class="mxinfo" id="T117:U2"><span class="var type1" id="S3T117U6">cmd</span></span>, <span class="var type1" id="S4T41U7">varargin</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="46,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% This function unifies handling of interp vs. codegen call as well as</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,5" id="srcline5">  5</a></span><span class="line"><span class="comment">% errStat / errStr assignment.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,7" id="srcline7">  7</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="46,8" id="srcline8">  8</a></span><span class="line"><span class="comment">%   Copyright 2011-2012 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,9" id="srcline9">  9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,10" id="srcline10"> 10</a></span><span class="line">coder.extrinsic(<span class="string">'setupsdru'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="46,11" id="srcline11"> 11</a></span><span class="line">coder.extrinsic(<span class="string">'sdruroot'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="46,12" id="srcline12"> 12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,13" id="srcline13"> 13</a></span><span class="line"><span class="keyword">persistent</span> <span class="var type1" id="S6T13U21">isSetupsdruCalled</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,14" id="srcline14"> 14</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T13:U6"><span class="mxinfo" id="T13:U7">isempty(<span class="var type2" id="S6T0U26">isSetupsdruCalled</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="46,15" id="srcline15"> 15</a></span><span class="line">  <span class="mxinfo" id="T13:U8"><span class="var type1" id="S6T13U29">isSetupsdruCalled</span> = <span class="mxinfo" id="T13:U10">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,16" id="srcline16"> 16</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,17" id="srcline17"> 17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,18" id="srcline18"> 18</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T13:U11">~<span class="var type1" id="S6T13U36">isSetupsdruCalled</span></span> &amp;&amp; (isempty(coder.target()) || strcmp(coder.target(), <span class="string">'mex'</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="46,19" id="srcline19"> 19</a></span><span class="line">    <span class="extrinsicFcn" id="F194N27:B54">setupsdru</span>(<span class="extrinsicFcn" id="F193N26:B56">sdruroot</span>, <span class="string">'silent'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="46,20" id="srcline20"> 20</a></span><span class="line">    <span class="mxinfo" id="T13:U13"><span class="var type1" id="S6T13U60">isSetupsdruCalled</span> = <span class="mxinfo" id="T13:U15">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,21" id="srcline21"> 21</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,22" id="srcline22"> 22</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="46,23" id="srcline23"> 23</a></span><span class="line"><span class="mxinfo" id="T5:U16"><span class="var type1" id="S13T5U65">MAX_STR_SIZE</span>                = <span class="mxinfo" id="T5:U18">128</span></span>;   <span class="comment">% These sizes must match those in C code.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,24" id="srcline24"> 24</a></span><span class="line"><span class="mxinfo" id="T5:U19"><span class="var type1" id="S14T5U69">MAX_DEV_DESCR_STR_SIZE</span>      = <span class="mxinfo" id="T5:U21">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,25" id="srcline25"> 25</a></span><span class="line"><span class="mxinfo" id="T5:U22"><span class="var type1" id="S15T5U73">MAX_ERROR_MESSAGE_LENGTH</span>    = <span class="mxinfo" id="T5:U24">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,26" id="srcline26"> 26</a></span><span class="line"><span class="mxinfo" id="T5:U25"><span class="var type1" id="S16T5U77">MAX_FRAMELENGTH</span>             = <span class="mxinfo" id="T5:U27">46336</span></span>; <span class="comment">% Arbitrary max imposed on ML/SL side</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,27" id="srcline27"> 27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,28" id="srcline28"> 28</a></span><span class="line"><span class="comment">% function is being called in interpreted mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,29" id="srcline29"> 29</a></span><span class="line"><span class="keyword">if</span> (isempty(coder.target()))</span></span>
<span class="srcline"><span class="lineno"><a href="46,30" id="srcline30"> 30</a></span><span class="line">    <span class="comment">% Lock the mex file if called from MATLAB. This is not called for generated code.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,31" id="srcline31"> 31</a></span><span class="line">    <span class="comment">% Locking the mex file in MATLAB prevents MATLAB from hanging if clear all is called.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,32" id="srcline32"> 32</a></span><span class="line">    <span class="comment">% Clear all first deletes mex files. That removes the driver and hangs MATLAB if a </span></span></span>
<span class="srcline"><span class="lineno"><a href="46,33" id="srcline33"> 33</a></span><span class="line">    <span class="comment">% driver is in use, i.e. System object is locked.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,34" id="srcline34"> 34</a></span><span class="line">    usrp_uhd_mapi(<span class="string">'sdruMexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,35" id="srcline35"> 35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,36" id="srcline36"> 36</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type2" id="S3T0U94">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="46,37" id="srcline37"> 37</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,38" id="srcline38"> 38</a></span><span class="line">            [<span class="var type0" id="S18T0U103">retStr</span>, <span class="var type2" id="S19T0U104">errStat</span>, <span class="var type2" id="S20T0U105">errStr</span>] = usrp_uhd_mapi(<span class="var type2" id="S3T0U108">cmd</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,39" id="srcline39"> 39</a></span><span class="line">            <span class="var type2" id="S2T0U112">varargout</span>{1} = <span class="var type0" id="S18T0U114">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,40" id="srcline40"> 40</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,41" id="srcline41"> 41</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'getDeviceDescription'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,42" id="srcline42"> 42</a></span><span class="line">            [<span class="var type0" id="S18T0U123">retStr</span>, <span class="var type2" id="S19T0U124">errStat</span>, <span class="var type2" id="S20T0U125">errStr</span>] = usrp_uhd_mapi(<span class="var type2" id="S3T0U128">cmd</span>, <span class="var type2" id="S4T0U130">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="46,43" id="srcline43"> 43</a></span><span class="line">            <span class="var type2" id="S2T0U135">varargout</span>{1} = <span class="var type0" id="S18T0U137">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,44" id="srcline44"> 44</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,45" id="srcline45"> 45</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'closeDataConnection'</span>, <span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,46" id="srcline46"> 46</a></span><span class="line">            [<span class="var type2" id="S19T0U149">errStat</span>, <span class="var type2" id="S20T0U150">errStr</span>] = usrp_uhd_mapi(<span class="var type2" id="S3T0U153">cmd</span>, <span class="var type2" id="S4T0U155">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="46,47" id="srcline47"> 47</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,48" id="srcline48"> 48</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'createDriver'</span>,  <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,49" id="srcline49"> 49</a></span><span class="line">              <span class="string">'setRate'</span>, <span class="string">'setFrequency'</span>, <span class="string">'setGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,50" id="srcline50"> 50</a></span><span class="line">              <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,51" id="srcline51"> 51</a></span><span class="line">              <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,52" id="srcline52"> 52</a></span><span class="line">              <span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,53" id="srcline53"> 53</a></span><span class="line">            [<span class="var type2" id="S2T0U174">varargout</span>{1}, <span class="var type2" id="S19T0U176">errStat</span>, <span class="var type2" id="S20T0U177">errStr</span>] = usrp_uhd_mapi(<span class="var type2" id="S3T0U180">cmd</span>, <span class="var type2" id="S4T0U182">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="46,54" id="srcline54"> 54</a></span><span class="line">           </span></span>
<span class="srcline"><span class="lineno"><a href="46,55" id="srcline55"> 55</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,56" id="srcline56"> 56</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,57" id="srcline57"> 57</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,58" id="srcline58"> 58</a></span><span class="line">              <span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,59" id="srcline59"> 59</a></span><span class="line">            [<span class="var type2" id="S2T0U198">varargout</span>{1}, <span class="var type2" id="S19T0U200">errStat</span>, <span class="var type2" id="S20T0U201">errStr</span>] = usrp_uhd_mapi(<span class="var type2" id="S3T0U204">cmd</span>, <span class="var type2" id="S4T0U206">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="46,60" id="srcline60"> 60</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,61" id="srcline61"> 61</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,62" id="srcline62"> 62</a></span><span class="line">            [<span class="var type2" id="S2T0U214">varargout</span>{1}, <span class="var type2" id="S2T0U217">varargout</span>{2}, <span class="var type2" id="S2T0U220">varargout</span>{3}, <span class="var type2" id="S19T0U222">errStat</span>, <span class="var type2" id="S20T0U223">errStr</span>] = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,63" id="srcline63"> 63</a></span><span class="line">                usrp_uhd_mapi(<span class="var type2" id="S3T0U226">cmd</span>, <span class="var type2" id="S4T0U228">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="46,64" id="srcline64"> 64</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,65" id="srcline65"> 65</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="46,66" id="srcline66"> 66</a></span><span class="line"><span class="comment">% function is being called in codegen mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,67" id="srcline67"> 67</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,68" id="srcline68"> 68</a></span><span class="line">    <span class="comment">% not being found: </span></span></span>
<span class="srcline"><span class="lineno"><a href="46,69" id="srcline69"> 69</a></span><span class="line">    <span class="comment">% eml_allow_enum_inputs;</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,70" id="srcline70"> 70</a></span><span class="line">    <span class="comment">%errStat_i = int32(0);</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,71" id="srcline71"> 71</a></span><span class="line">    <span class="mxinfo" id="T116:U28"><span class="var type1" id="S21T116U233">errStat_i</span> = <span class="mxinfo" id="T116:U30">UsrpErrorCapiEnumT(0)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,72" id="srcline72"> 72</a></span><span class="line">    <span class="mxinfo" id="T132:U31"><span class="var type1" id="S20T132U239">errStr</span>  = <span class="mxinfo" id="T114:U33">char(zeros(1,<span class="var type1" id="S15T5U245">MAX_ERROR_MESSAGE_LENGTH</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,73" id="srcline73"> 73</a></span><span class="line">    coder.varsize(<span class="string">'errStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,74" id="srcline74"> 74</a></span><span class="line">    <span class="mxinfo" id="T112:U35"><span class="var type1" id="S25T112U254">errStrSize</span> = <span class="mxinfo" id="T112:U37">int32(<span class="mxinfo" id="T5:U38">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,75" id="srcline75"> 75</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="46,76" id="srcline76"> 76</a></span><span class="line">    <span class="mxinfo" id="T28:U39"><span class="var type1" id="S27T28U260">cmd_c</span> = <span class="mxinfo" id="T28:U41">[<span class="var type1" id="S3T117U263">cmd</span> <span class="string">'_c'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,77" id="srcline77"> 77</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="46,78" id="srcline78"> 78</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type1" id="S3T117U267">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="46,79" id="srcline79"> 79</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sdruMexLock'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,80" id="srcline80"> 80</a></span><span class="line">             coder.ceval(<span class="string">'mexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,81" id="srcline81"> 81</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,82" id="srcline82"> 82</a></span><span class="line">            <span class="mxinfo" id="T133:U44"><span class="var type1" id="S28T133U285">flatAddrList</span>     = <span class="mxinfo" id="T120:U46">char(zeros(1,<span class="var type1" id="S13T5U291">MAX_STR_SIZE</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,83" id="srcline83"> 83</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,84" id="srcline84"> 84</a></span><span class="line">            <span class="mxinfo" id="T112:U48"><span class="var type1" id="S29T112U300">flatAddrListSize</span> = <span class="mxinfo" id="T112:U50">int32(<span class="mxinfo" id="T5:U51">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,85" id="srcline85"> 85</a></span><span class="line">            coder.ceval(<span class="var type1" id="S27T28U309">cmd_c</span>, coder.ref(<span class="mxinfo" id="T71:U53"><span class="var type1" id="S28T71U314">flatAddrList</span></span>), coder.wref(<span class="var type1" id="S21T116U319">errStat_i</span>), coder.ref(<span class="mxinfo" id="T71:U56"><span class="var type1" id="S20T71U324">errStr</span></span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,86" id="srcline86"> 86</a></span><span class="line">            <span class="mxinfo" id="T112:U58"><span class="var type1" id="S29T112U327">flatAddrListSize</span> = <span class="mxinfo" id="T112:U60">coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="mxinfo" id="T71:U61"><span class="var type1" id="S28T71U337">flatAddrList</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,87" id="srcline87"> 87</a></span><span class="line">            <span class="mxinfo" id="T15:U63"><span class="extrinsicFcn" id="F195N15:B340">assert</span>(<span class="mxinfo" id="T13:U64"><span class="var type1" id="S29T112U342">flatAddrListSize</span> &lt;= <span class="mxinfo" id="T5:U66"><span class="var type1" id="S13T5U343">MAX_STR_SIZE</span></span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,88" id="srcline88"> 88</a></span><span class="line">            <span class="mxinfo" id="T133:U68"><span class="var type1" id="S28T133U346">flatAddrList</span>     = <span class="mxinfo" id="T133:U70"><span class="var type1" id="S28T133U348">flatAddrList</span>(<span class="mxinfo" id="T112:U72">1</span>:<span class="var type1" id="S29T112U351">flatAddrListSize</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,89" id="srcline89"> 89</a></span><span class="line">            <span class="mxinfo" id="T133:U74"><span class="mxinfo" id="T133:U75"><span class="var type1" id="S2T121U355">varargout</span>{1}</span>     = <span class="var type1" id="S28T133U357">flatAddrList</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,90" id="srcline90"> 90</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,91" id="srcline91"> 91</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,92" id="srcline92"> 92</a></span><span class="line">            <span class="var type0" id="S31T0U364">addr_null</span>= [<span class="var type2" id="S4T0U368">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="46,93" id="srcline93"> 93</a></span><span class="line">            <span class="var type0" id="S32T0U373">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,94" id="srcline94"> 94</a></span><span class="line">            <span class="var type0" id="S32T0U381">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U391">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,95" id="srcline95"> 95</a></span><span class="line">            <span class="var type2" id="S28T0U394">flatAddrList</span>     = char(zeros(1,<span class="var type2" id="S13T0U400">MAX_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,96" id="srcline96"> 96</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,97" id="srcline97"> 97</a></span><span class="line">            <span class="var type2" id="S29T0U409">flatAddrListSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,98" id="srcline98"> 98</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U418">cmd_c</span>, <span class="var type0" id="S32T0U419">addr_c</span>, coder.ref(<span class="var type2" id="S28T0U424">flatAddrList</span>), coder.wref(<span class="var type2" id="S21T0U429">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U434">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,99" id="srcline99"> 99</a></span><span class="line">            <span class="var type2" id="S29T0U437">flatAddrListSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type2" id="S28T0U447">flatAddrList</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,100" id="srcline100">100</a></span><span class="line">            assert(<span class="var type2" id="S29T0U452">flatAddrListSize</span> &lt;= <span class="var type2" id="S13T0U453">MAX_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,101" id="srcline101">101</a></span><span class="line">            <span class="var type2" id="S28T0U456">flatAddrList</span>     = <span class="var type2" id="S28T0U458">flatAddrList</span>(1:<span class="var type2" id="S29T0U461">flatAddrListSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,102" id="srcline102">102</a></span><span class="line">            <span class="var type2" id="S2T0U465">varargout</span>{1}     = <span class="var type2" id="S28T0U467">flatAddrList</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,103" id="srcline103">103</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,104" id="srcline104">104</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'createDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,105" id="srcline105">105</a></span><span class="line">            <span class="comment">% NOTE: we expect to treat input strings as uint8 arrays in this</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,106" id="srcline106">106</a></span><span class="line">            <span class="comment">% code.  If we did not, then if the MATLAB char array involved chars</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,107" id="srcline107">107</a></span><span class="line">            <span class="comment">% that took up &gt;1 byte, we'd get an error from the coder mex about</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,108" id="srcline108">108</a></span><span class="line">            <span class="comment">% the array size changing.  ("The conversion from a unicode string</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,109" id="srcline109">109</a></span><span class="line">            <span class="comment">% to a local code page changes the number of characters.  This is </span></span></span>
<span class="srcline"><span class="lineno"><a href="46,110" id="srcline110">110</a></span><span class="line">            <span class="comment">% not supported.") For example, a block name of foo??ball will </span></span></span>
<span class="srcline"><span class="lineno"><a href="46,111" id="srcline111">111</a></span><span class="line">            <span class="comment">% error out.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,112" id="srcline112">112</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,113" id="srcline113">113</a></span><span class="line">            <span class="comment">% The following code will handle input strings that have been passed</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,114" id="srcline114">114</a></span><span class="line">            <span class="comment">% in as uint8 arrays.  Callers must do the casting.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,115" id="srcline115">115</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,116" id="srcline116">116</a></span><span class="line">            <span class="var type0" id="S33T0U474">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,117" id="srcline117">117</a></span><span class="line">            <span class="var type0" id="S31T0U480">addr_null</span>= [<span class="var type2" id="S4T0U484">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="46,118" id="srcline118">118</a></span><span class="line">            <span class="var type0" id="S32T0U489">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,119" id="srcline119">119</a></span><span class="line">            <span class="var type0" id="S32T0U497">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U507">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,120" id="srcline120">120</a></span><span class="line">            <span class="var type0" id="S34T0U510">req_null</span> = [<span class="var type2" id="S4T0U514">varargin</span>{3} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="46,121" id="srcline121">121</a></span><span class="line">            <span class="var type0" id="S35T0U519">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,122" id="srcline122">122</a></span><span class="line">            <span class="var type0" id="S35T0U527">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S34T0U537">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,123" id="srcline123">123</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U543">cmd_c</span>, <span class="var type0" id="S32T0U544">addr_c</span>, <span class="var type2" id="S4T0U546">varargin</span>{2}, <span class="var type0" id="S35T0U548">req_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,124" id="srcline124">124</a></span><span class="line">                        coder.wref(<span class="var type0" id="S33T0U553">driverApiH</span>), coder.wref(<span class="var type2" id="S21T0U558">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U563">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,125" id="srcline125">125</a></span><span class="line">            <span class="var type2" id="S2T0U567">varargout</span>{1} = <span class="var type0" id="S33T0U569">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,126" id="srcline126">126</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,127" id="srcline127">127</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S31T0U580">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="46,128" id="srcline128">128</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S34T0U591">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,129" id="srcline129">129</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,130" id="srcline130">130</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,131" id="srcline131">131</a></span><span class="line">            <span class="comment">% varargin   1      2         3          4              5       6         7</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,132" id="srcline132">132</a></span><span class="line">            <span class="comment">%           addr, boardId, requester, frameLength, dportType, buffMode, buffSize</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,133" id="srcline133">133</a></span><span class="line">            <span class="comment">% varargout  1         2         3</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,134" id="srcline134">134</a></span><span class="line">            <span class="comment">%           driverH, errStat, errMsg</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,135" id="srcline135">135</a></span><span class="line">            <span class="var type0" id="S33T0U598">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,136" id="srcline136">136</a></span><span class="line">            <span class="var type0" id="S31T0U604">addr_null</span>= [<span class="var type2" id="S4T0U608">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="46,137" id="srcline137">137</a></span><span class="line">            <span class="var type0" id="S32T0U613">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,138" id="srcline138">138</a></span><span class="line">            <span class="var type0" id="S32T0U621">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U631">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,139" id="srcline139">139</a></span><span class="line">            <span class="var type0" id="S34T0U634">req_null</span> = [<span class="var type2" id="S4T0U638">varargin</span>{3} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="46,140" id="srcline140">140</a></span><span class="line">            <span class="var type0" id="S35T0U643">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,141" id="srcline141">141</a></span><span class="line">            <span class="var type0" id="S35T0U651">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S34T0U661">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,142" id="srcline142">142</a></span><span class="line">            assert(<span class="var type2" id="S4T0U667">varargin</span>{4}&lt;=<span class="var type2" id="S16T0U669">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,143" id="srcline143">143</a></span><span class="line">            <span class="var type0" id="S36T0U672">frameLength</span> = uint32(<span class="var type2" id="S4T0U676">varargin</span>{4});</span></span>
<span class="srcline"><span class="lineno"><a href="46,144" id="srcline144">144</a></span><span class="line">            <span class="var type0" id="S38T0U680">buffSize</span>    = uint32(<span class="var type2" id="S4T0U684">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="46,145" id="srcline145">145</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,146" id="srcline146">146</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U691">cmd_c</span>, <span class="var type0" id="S32T0U692">addr_c</span>, <span class="var type2" id="S4T0U694">varargin</span>{2}, <span class="var type0" id="S35T0U696">req_c</span>, <span class="var type0" id="S36T0U697">frameLength</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,147" id="srcline147">147</a></span><span class="line">                        <span class="var type2" id="S4T0U699">varargin</span>{5}, <span class="var type2" id="S4T0U702">varargin</span>{6}, <span class="var type0" id="S38T0U704">buffSize</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,148" id="srcline148">148</a></span><span class="line">                        coder.wref(<span class="var type0" id="S33T0U709">driverApiH</span>), coder.wref(<span class="var type2" id="S21T0U714">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U719">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,149" id="srcline149">149</a></span><span class="line">            <span class="var type2" id="S2T0U723">varargout</span>{1} = <span class="var type0" id="S33T0U725">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,150" id="srcline150">150</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,151" id="srcline151">151</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S31T0U736">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="46,152" id="srcline152">152</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S34T0U747">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,153" id="srcline153">153</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,154" id="srcline154">154</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'closeDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,155" id="srcline155">155</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U759">cmd_c</span>, <span class="var type2" id="S4T0U761">varargin</span>{:}, coder.wref(<span class="var type2" id="S21T0U767">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U772">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,156" id="srcline156">156</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,157" id="srcline157">157</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,158" id="srcline158">158</a></span><span class="line">            <span class="var type0" id="S31T0U779">addr_null</span>= [<span class="var type2" id="S4T0U783">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="46,159" id="srcline159">159</a></span><span class="line">            <span class="var type0" id="S32T0U788">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,160" id="srcline160">160</a></span><span class="line">            <span class="var type0" id="S32T0U796">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U806">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,161" id="srcline161">161</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U812">cmd_c</span>, <span class="var type0" id="S32T0U813">addr_c</span>, coder.wref(<span class="var type2" id="S21T0U818">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U823">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,162" id="srcline162">162</a></span><span class="line">            <span class="comment">% Tell coder that addr_null  must be alive throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,163" id="srcline163">163</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S31T0U834">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="46,164" id="srcline164">164</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,165" id="srcline165">165</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getDeviceDescription'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,166" id="srcline166">166</a></span><span class="line">            <span class="var type0" id="S39T0U839">descStr</span> = char(zeros(1,<span class="var type2" id="S14T0U845">MAX_DEV_DESCR_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,167" id="srcline167">167</a></span><span class="line">            coder.varsize(<span class="string">'descStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,168" id="srcline168">168</a></span><span class="line">            <span class="var type0" id="S40T0U854">descStrSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,169" id="srcline169">169</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U863">cmd_c</span>, <span class="var type2" id="S4T0U865">varargin</span>{:}, coder.ref(<span class="var type0" id="S39T0U871">descStr</span>), coder.wref(<span class="var type2" id="S21T0U876">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U881">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,170" id="srcline170">170</a></span><span class="line">            <span class="var type0" id="S40T0U884">descStrSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S39T0U894">descStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,171" id="srcline171">171</a></span><span class="line">            assert(<span class="var type0" id="S40T0U899">descStrSize</span> &lt;= <span class="var type2" id="S14T0U900">MAX_DEV_DESCR_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,172" id="srcline172">172</a></span><span class="line">            <span class="var type0" id="S39T0U903">descStr</span> = <span class="var type0" id="S39T0U905">descStr</span>(1:<span class="var type0" id="S40T0U908">descStrSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,173" id="srcline173">173</a></span><span class="line">            <span class="var type2" id="S2T0U912">varargout</span>{1} = <span class="var type0" id="S39T0U914">descStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,174" id="srcline174">174</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,175" id="srcline175">175</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setClockConfigFull'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,176" id="srcline176">176</a></span><span class="line">            <span class="var type0" id="S41T0U919">localClockConfig</span> = <span class="var type2" id="S4T0U921">varargin</span>{2};</span></span>
<span class="srcline"><span class="lineno"><a href="46,177" id="srcline177">177</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S41T0U928">localClockConfig</span>, <span class="string">'ClockConfigCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,178" id="srcline178">178</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U936">cmd_c</span>, <span class="var type2" id="S4T0U938">varargin</span>{1}, <span class="var type0" id="S41T0U940">localClockConfig</span>, coder.wref(<span class="var type2" id="S21T0U945">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U950">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,179" id="srcline179">179</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,180" id="srcline180">180</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setRate'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,181" id="srcline181">181</a></span><span class="line">            <span class="var type0" id="S42T0U961">actualValue</span> = double(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,182" id="srcline182">182</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U970">cmd_c</span>, <span class="var type2" id="S4T0U972">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,183" id="srcline183">183</a></span><span class="line">                        coder.wref(<span class="var type0" id="S42T0U978">actualValue</span>), coder.wref(<span class="var type2" id="S21T0U983">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U988">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,184" id="srcline184">184</a></span><span class="line">            <span class="var type2" id="S2T0U992">varargout</span>{1} = <span class="var type0" id="S42T0U994">actualValue</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,185" id="srcline185">185</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="46,186" id="srcline186">186</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setFrequency'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,187" id="srcline187">187</a></span><span class="line">            <span class="var type0" id="S44T0U999">tuneResult</span> = TuneResultCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="46,188" id="srcline188">188</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S44T0U1007">tuneResult</span>, <span class="string">'TuneResultCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,189" id="srcline189">189</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U1015">cmd_c</span>, <span class="var type2" id="S4T0U1017">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,190" id="srcline190">190</a></span><span class="line">                        coder.wref(<span class="var type0" id="S44T0U1023">tuneResult</span>), coder.wref(<span class="var type2" id="S21T0U1028">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U1033">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,191" id="srcline191">191</a></span><span class="line">            <span class="var type2" id="S2T0U1037">varargout</span>{1} = <span class="var type0" id="S44T0U1039">tuneResult</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,192" id="srcline192">192</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,193" id="srcline193">193</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getFrequencyRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,194" id="srcline194">194</a></span><span class="line">            <span class="var type0" id="S46T0U1044">freqRange</span> = FreqRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="46,195" id="srcline195">195</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S46T0U1052">freqRange</span>, <span class="string">'FreqRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,196" id="srcline196">196</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U1060">cmd_c</span>, <span class="var type2" id="S4T0U1062">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,197" id="srcline197">197</a></span><span class="line">                        coder.wref(<span class="var type0" id="S46T0U1068">freqRange</span>), coder.wref(<span class="var type2" id="S21T0U1073">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U1078">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,198" id="srcline198">198</a></span><span class="line">            <span class="var type2" id="S2T0U1082">varargout</span>{1} = <span class="var type0" id="S46T0U1084">freqRange</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,199" id="srcline199">199</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,200" id="srcline200">200</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getGainRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,201" id="srcline201">201</a></span><span class="line">            <span class="var type0" id="S48T0U1089">gainRange</span> = GainRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="46,202" id="srcline202">202</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S48T0U1097">gainRange</span>, <span class="string">'GainRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,203" id="srcline203">203</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U1105">cmd_c</span>, <span class="var type2" id="S4T0U1107">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,204" id="srcline204">204</a></span><span class="line">                        coder.wref(<span class="var type0" id="S48T0U1113">gainRange</span>), coder.wref(<span class="var type2" id="S21T0U1118">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U1123">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,205" id="srcline205">205</a></span><span class="line">            <span class="var type2" id="S2T0U1127">varargout</span>{1} = <span class="var type0" id="S48T0U1129">gainRange</span>;           </span></span>
<span class="srcline"><span class="lineno"><a href="46,206" id="srcline206">206</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,207" id="srcline207">207</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,208" id="srcline208">208</a></span><span class="line">            <span class="comment">% 46336 represents 0.00185344 seconds at 25Msps.  1 ms seems to be a decent</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,209" id="srcline209">209</a></span><span class="line">            <span class="comment">% time interval to interact with the IP stack on a default glnxa64 machine.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,210" id="srcline210">210</a></span><span class="line">            <span class="comment">% 32768 seems to be the max for UHD(TM) so we may want to change to that.</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,211" id="srcline211">211</a></span><span class="line">            assert(<span class="var type2" id="S4T0U1137">varargin</span>{6}&lt;=<span class="var type2" id="S16T0U1139">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,212" id="srcline212">212</a></span><span class="line">            <span class="var type0" id="S36T0U1142">frameLength</span> = uint32(<span class="var type2" id="S4T0U1146">varargin</span>{6});</span></span>
<span class="srcline"><span class="lineno"><a href="46,213" id="srcline213">213</a></span><span class="line">            <span class="var type0" id="S50T0U1150">data</span>        = complex(zeros(<span class="var type2" id="S16T0U1155">MAX_FRAMELENGTH</span>, 1, <span class="string">'int16'</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,214" id="srcline214">214</a></span><span class="line">            <span class="var type0" id="S52T0U1160">dataLength</span>  = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,215" id="srcline215">215</a></span><span class="line">            <span class="var type0" id="S53T0U1166">overflow</span>    = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,216" id="srcline216">216</a></span><span class="line">            coder.ceval(<span class="var type2" id="S27T0U1175">cmd_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,217" id="srcline217">217</a></span><span class="line">                <span class="var type2" id="S4T0U1177">varargin</span>{1}, <span class="var type2" id="S4T0U1180">varargin</span>{2}, <span class="var type2" id="S4T0U1183">varargin</span>{3}, <span class="var type2" id="S4T0U1186">varargin</span>{4}, <span class="var type2" id="S4T0U1189">varargin</span>{5}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,218" id="srcline218">218</a></span><span class="line">                coder.wref(<span class="var type0" id="S50T0U1195">data</span>), coder.wref(<span class="var type0" id="S52T0U1200">dataLength</span>), coder.wref(<span class="var type0" id="S53T0U1205">overflow</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,219" id="srcline219">219</a></span><span class="line">                coder.wref(<span class="var type2" id="S21T0U1210">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U1215">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,220" id="srcline220">220</a></span><span class="line">            <span class="var type2" id="S2T0U1219">varargout</span>{1} = <span class="var type0" id="S50T0U1221">data</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,221" id="srcline221">221</a></span><span class="line">            <span class="var type2" id="S2T0U1225">varargout</span>{2} = <span class="var type0" id="S52T0U1227">dataLength</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,222" id="srcline222">222</a></span><span class="line">            <span class="var type2" id="S2T0U1231">varargout</span>{3} = <span class="var type0" id="S53T0U1233">overflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,223" id="srcline223">223</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,224" id="srcline224">224</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,225" id="srcline225">225</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,226" id="srcline226">226</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,227" id="srcline227">227</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,228" id="srcline228">228</a></span><span class="line">            assert(<span class="var type2" id="S4T0U1248">varargin</span>{7}&lt;=<span class="var type2" id="S16T0U1250">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,229" id="srcline229">229</a></span><span class="line">            <span class="var type0" id="S36T0U1253">frameLength</span> = uint32(<span class="var type2" id="S4T0U1257">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="46,230" id="srcline230">230</a></span><span class="line">            <span class="var type0" id="S54T0U1261">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,231" id="srcline231">231</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,232" id="srcline232">232</a></span><span class="line">                <span class="var type2" id="S4T0U1272">varargin</span>{1}, <span class="var type2" id="S4T0U1275">varargin</span>{2}, <span class="var type2" id="S4T0U1278">varargin</span>{3}, <span class="var type2" id="S4T0U1281">varargin</span>{4}, <span class="var type2" id="S4T0U1284">varargin</span>{5}, <span class="var type2" id="S4T0U1287">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,233" id="srcline233">233</a></span><span class="line">                coder.wref(<span class="var type0" id="S54T0U1293">underflow</span>), coder.wref(<span class="var type2" id="S21T0U1298">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U1303">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,234" id="srcline234">234</a></span><span class="line">            <span class="var type2" id="S2T0U1307">varargout</span>{1} = <span class="var type0" id="S54T0U1309">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,235" id="srcline235">235</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="46,236" id="srcline236">236</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,237" id="srcline237">237</a></span><span class="line">            assert(<span class="var type2" id="S4T0U1319">varargin</span>{7}&lt;=<span class="var type2" id="S16T0U1321">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="46,238" id="srcline238">238</a></span><span class="line">            <span class="var type0" id="S36T0U1324">frameLength</span> = uint32(<span class="var type2" id="S4T0U1328">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="46,239" id="srcline239">239</a></span><span class="line">            <span class="var type0" id="S55T0U1332">dPortDType</span>  = DataPortDataTypeCapiEnumT.DPortDTypeInt16;</span></span>
<span class="srcline"><span class="lineno"><a href="46,240" id="srcline240">240</a></span><span class="line">            <span class="var type0" id="S54T0U1338">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="46,241" id="srcline241">241</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,242" id="srcline242">242</a></span><span class="line">                <span class="var type2" id="S4T0U1349">varargin</span>{1}, <span class="var type2" id="S4T0U1352">varargin</span>{2}, <span class="var type2" id="S4T0U1355">varargin</span>{3}, <span class="var type2" id="S4T0U1358">varargin</span>{4}, <span class="var type2" id="S4T0U1361">varargin</span>{5}, <span class="var type2" id="S4T0U1364">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,243" id="srcline243">243</a></span><span class="line">                coder.wref(<span class="var type0" id="S54T0U1370">underflow</span>), coder.wref(<span class="var type2" id="S21T0U1375">errStat_i</span>), coder.ref(<span class="var type2" id="S20T0U1380">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="46,244" id="srcline244">244</a></span><span class="line">            <span class="var type2" id="S2T0U1384">varargout</span>{1} = <span class="var type0" id="S54T0U1386">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,245" id="srcline245">245</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,246" id="srcline246">246</a></span><span class="line">    <span class="comment">%errStat = UsrpErrorCapiEnumT(errStat_i);</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,247" id="srcline247">247</a></span><span class="line">    <span class="mxinfo" id="T116:U78"><span class="var type1" id="S19T116U1389">errStat</span>     = <span class="var type1" id="S21T116U1390">errStat_i</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,248" id="srcline248">248</a></span><span class="line">    <span class="mxinfo" id="T112:U81"><span class="var type1" id="S25T112U1393">errStrSize</span>  = <span class="mxinfo" id="T112:U83">coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="mxinfo" id="T71:U84"><span class="var type1" id="S20T71U1403">errStr</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,249" id="srcline249">249</a></span><span class="line">    <span class="mxinfo" id="T15:U86"><span class="extrinsicFcn" id="F196N15:B1406">assert</span>(<span class="mxinfo" id="T13:U87"><span class="var type1" id="S25T112U1408">errStrSize</span> &lt;= <span class="mxinfo" id="T5:U89"><span class="var type1" id="S15T5U1409">MAX_ERROR_MESSAGE_LENGTH</span></span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,250" id="srcline250">250</a></span><span class="line">    <span class="mxinfo" id="T132:U91"><span class="var type1" id="S20T132U1412">errStr</span>      = <span class="mxinfo" id="T132:U93"><span class="var type1" id="S20T132U1414">errStr</span>(<span class="mxinfo" id="T112:U95">1</span>:<span class="var type1" id="S25T112U1417">errStrSize</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,251" id="srcline251">251</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,252" id="srcline252">252</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="46,253" id="srcline253">253</a></span><span class="line"><span class="keyword">switch</span> (<span class="var type1" id="S3T117U1420">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="46,254" id="srcline254">254</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'closeDataConnection'</span>, <span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,255" id="srcline255">255</a></span><span class="line">        <span class="var type2" id="S2T0U1432">varargout</span>{1} = <span class="var type2" id="S19T0U1434">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,256" id="srcline256">256</a></span><span class="line">        <span class="var type2" id="S2T0U1438">varargout</span>{2} = <span class="var type2" id="S20T0U1440">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,257" id="srcline257">257</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="46,258" id="srcline258">258</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'reportDrivers'</span>, <span class="string">'createDriver'</span>, <span class="string">'getDeviceDescription'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,259" id="srcline259">259</a></span><span class="line">          <span class="string">'setRate'</span>, <span class="string">'setFrequency'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,260" id="srcline260">260</a></span><span class="line">          <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="string">'openDataConnection'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,261" id="srcline261">261</a></span><span class="line">          <span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,262" id="srcline262">262</a></span><span class="line">          <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,263" id="srcline263">263</a></span><span class="line">          <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,264" id="srcline264">264</a></span><span class="line">          <span class="string">'sendInt16Data_x'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="46,265" id="srcline265">265</a></span><span class="line">        <span class="mxinfo" id="T116:U98"><span class="mxinfo" id="T116:U99"><span class="var type1" id="S2T121U1468">varargout</span>{2}</span> = <span class="var type1" id="S19T116U1470">errStat</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,266" id="srcline266">266</a></span><span class="line">        <span class="mxinfo" id="T132:U102"><span class="mxinfo" id="T132:U103"><span class="var type1" id="S2T121U1474">varargout</span>{3}</span> = <span class="var type1" id="S20T132U1476">errStr</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,267" id="srcline267">267</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="46,268" id="srcline268">268</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,269" id="srcline269">269</a></span><span class="line">        <span class="var type2" id="S2T0U1482">varargout</span>{4} = <span class="var type2" id="S19T0U1484">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,270" id="srcline270">270</a></span><span class="line">        <span class="var type2" id="S2T0U1488">varargout</span>{5} = <span class="var type2" id="S20T0U1490">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="46,271" id="srcline271">271</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="46,272" id="srcline272">272</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="46,273" id="srcline273">273</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
