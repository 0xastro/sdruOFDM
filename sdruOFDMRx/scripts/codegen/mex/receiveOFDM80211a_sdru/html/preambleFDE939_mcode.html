<pre class="code">
<span class="srcline"><span class="lineno"><a href="139,52" id="srcline52">52</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="139,53" id="srcline53">53</a></span><span class="line"><span class="comment">% Calculate Equalizer Taps with preamble symbols</span></span></span>
<span class="srcline"><span class="lineno"><a href="139,54" id="srcline54">54</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S26T4U218">RGains</span> = preambleFDE(<span class="var type1" id="S27T764U221">R</span>, <span class="var type1" id="S28T564U222">Known</span>, <span class="mxinfo" id="T1:U4"><span class="var type1" id="S29T1U223">tx</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="139,55" id="srcline55">55</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="139,56" id="srcline56">56</a></span><span class="line"><span class="comment">% Calculate non-normalized channel gains</span></span></span>
<span class="srcline"><span class="lineno"><a href="139,57" id="srcline57">57</a></span><span class="line"><span class="mxinfo" id="T563:U6"><span class="var type1" id="S27T563U226">R</span> = <span class="mxinfo" id="T563:U8"><span class="var type1" id="S27T764U228">R</span>(<span class="mxinfo" id="T807:U10"><span class="mxinfo" id="T2:U11">1</span>:(<span class="mxinfo" id="T2:U12"><span class="var type1" id="S29T1U235">tx</span>.hDataDemod.FFTLength-sum(<span class="var type1" id="S29T1U242">tx</span>.hDataDemod.NumGuardBandCarriers)</span>)</span>,<span class="mxinfo" id="T21:U15"><span class="mxinfo" id="T2:U16">1</span>:<span class="mxinfo" id="T2:U17">2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="139,58" id="srcline58">58</a></span><span class="line"><span class="mxinfo" id="T563:U18"><span class="var type1" id="S31T563U250">RNormal</span> = <span class="mxinfo" id="T563:U20"><span class="var type1" id="S27T563U252">R</span>./<span class="var type1" id="S28T564U253">Known</span></span></span>; <span class="comment">% Known is the original Long Preamble symbols </span></span></span>
<span class="srcline"><span class="lineno"><a href="139,59" id="srcline59">59</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="139,60" id="srcline60">60</a></span><span class="line"><span class="comment">% Scale channel gains</span></span></span>
<span class="srcline"><span class="lineno"><a href="139,61" id="srcline61">61</a></span><span class="line"><span class="mxinfo" id="T7:U23"><span class="var type1" id="S32T7U256">REnergy</span> = <span class="mxinfo" id="T7:U25">mean(<span class="mxinfo" id="T564:U26"><span class="mxinfo" id="T564:U27">abs(<span class="var type1" id="S31T563U262">RNormal</span>)</span>.^2</span>,2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="139,62" id="srcline62">62</a></span><span class="line"><span class="mxinfo" id="T4:U29"><span class="var type1" id="S35T4U267">RConj</span> = <span class="mxinfo" id="T4:U31">conj(<span class="mxinfo" id="T4:U32">mean(<span class="var type1" id="S31T563U272">RNormal</span>,2)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="139,63" id="srcline63">63</a></span><span class="line"><span class="mxinfo" id="T4:U34"><span class="var type1" id="S26T4U276">RGains</span> = <span class="mxinfo" id="T4:U36"><span class="var type1" id="S35T4U278">RConj</span>./ <span class="var type1" id="S32T7U279">REnergy</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="139,64" id="srcline64">64</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="139,65" id="srcline65">65</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="139,66" id="srcline66">66</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="139,67" id="srcline67">67</a></span><span class="line"><span class="comment">% Calculate Equalizer Taps with pilot symbols</span></span></span>
</pre>
